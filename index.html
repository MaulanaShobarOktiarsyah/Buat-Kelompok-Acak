<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pembagian Kelompok Murid</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(120deg, #f6d365, #fda085);
        padding: 20px;
        text-align: center;
    }
    h1 {
        color: #fff;
        text-shadow: 2px 2px 5px #555;
    }
    button {
        padding: 10px 20px;
        margin: 10px;
        font-size: 16px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        box-shadow: 2px 2px 5px #333;
        transition: 0.3s;
    }
    button:hover {
        transform: scale(1.1);
    }
    #kelompokTable {
        margin: 20px auto;
        border-collapse: collapse;
        width: 90%;
    }
    #kelompokTable th, #kelompokTable td {
        border: 1px solid #333;
        padding: 10px;
        text-align: center;
        font-size: 14px;
    }
    .kelompokRow {
        transition: all 0.5s;
    }
</style>
</head>
<body>

<h1>ðŸŽ“ Pembagian Kelompok Murid ðŸŽ“</h1>

<button onclick="acakKelompok()">ðŸŽ² Acak Kelompok</button>
<button onclick="salinClipboard()">ðŸ“‹ Salin ke Clipboard</button>

<table id="kelompokTable">
</table>

<script>
let murid = [
    "Murid1","Murid2","Murid3","Murid4","Murid5","Murid6","Murid7","Murid8",
    "Murid9","Murid10","Murid11","Murid12","Murid13","Murid14","Murid15",
    "Murid16","Murid17","Murid18","Murid19","Murid20","Murid21","Murid22",
    "Murid23","Murid24","Murid25","Murid26","Murid27","Murid28","Murid29",
    "Murid30","Murid31","Murid32"
];
let siswi = ["Siswi1","Siswi2","Siswi3"];

let jumlahPerKelompok = 4; // bisa diubah

function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

function acakKelompok() {
    let muridShuffle = shuffle([...murid]);
    let siswiShuffle = shuffle([...siswi]);
    let kelompok = [];

    let siswiTersisa = [...siswiShuffle];

    // Jika jumlah per kelompok >= 3 dan siswi 3 orang â†’ tetap bersama
    if(jumlahPerKelompok >= 3 && siswiTersisa.length === 3) {
        let kelompokPertama = muridShuffle.splice(0, jumlahPerKelompok - 3);
        kelompok.push([...kelompokPertama, ...siswiTersisa]);
        siswiTersisa = [];
    }

    // Bagi murid tersisa
    while(muridShuffle.length > 0) {
        kelompok.push(muridShuffle.splice(0, jumlahPerKelompok));
    }

    // Kalau jumlah per kelompok <3 atau siswi tersisa â†’ siswi dicampur
    if(jumlahPerKelompok < 3 || siswiTersisa.length > 0) {
        for(let i=0; i<siswiTersisa.length; i++) {
            let indexKel = i % kelompok.length;
            kelompok[indexKel].push(siswiTersisa[i]);
        }
    }

    tampilKelompok(kelompok);
}

function tampilKelompok(kelompok) {
    let table = document.getElementById("kelompokTable");
    table.innerHTML = "";
    for(let i=0; i<kelompok.length; i++) {
        let row = table.insertRow();
        row.classList.add("kelompokRow");
        let cell1 = row.insertCell();
        cell1.innerHTML = `Kelompok ${i+1} ðŸŽ¯`;
        for(let j=0; j<kelompok[i].length; j++){
            let cell = row.insertCell();
            let warna = `hsl(${Math.random()*360},70%,80%)`;
            cell.style.backgroundColor = warna;
            cell.innerHTML = kelompok[i][j];
        }
    }
}

function salinClipboard() {
    let table = document.getElementById("kelompokTable");
    let text = "";
    for(let i=0;i<table.rows.length;i++){
        let row = table.rows[i];
        text += row.cells[0].innerText + ": ";
        for(let j=1;j<row.cells.length;j++){
            text += row.cells[j].innerText + " ";
        }
        text += "\n";
    }
    navigator.clipboard.writeText(text).then(()=>{
        alert("âœ… Kelompok berhasil disalin ke clipboard!");
    });
}
</script>

</body>
</html>
